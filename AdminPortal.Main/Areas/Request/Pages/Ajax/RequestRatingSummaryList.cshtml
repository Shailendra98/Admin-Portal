@page
@model TKW.AdminPortal.Areas.Request.Pages.Ajax.RequestRatingSummaryListModel
@using Microsoft.AspNetCore.Routing
@{
    Layout = null;
}
@if (Model.TotalSellerRatingCount != 0 || Model.TotalPickupBoyRatingCount != 0)
{
            <div class="card mb-2">
                <div class="card-body p-3">
                    <div class="row">
                        @if (Model.TotalSellerRatingCount != 0)
                        {
                            <div class="col-md-6 border-end ps-3 pe-4">
                                <div class="row pb-2">
                                    <div class="col-md-6">
                                        <h6>
                                            Seller ratings
                                        </h6>
                                    </div>
                                    <div class="col-md-6 text-end">

                                        <span class="fw-bold h5">@Model.SellerRatingStarAverage.ToString("#.#")</span>
                                        <span>
                                            @for (int i = 1; i <= Model.SellerRatingStarAverage; i++)
                                            {
                                                <i class="fa fa-star text-warning"></i>
                                            }
                                            @if (Model.SellerRatingStarAverage % 1 != 0)
                                            {
                                                <i class="fa fa-star-half-empty text-warning"></i>
                                            }
                                        </span>
                                        <br />
                                        <small>(Based on @Model.TotalSellerRatingCount ratings)</small>

                                    </div>
                                </div>
                                @foreach (var item in Model.RatingSummary.SellerCounts.OrderByDescending(m => m.Star))
                                {
                                    int percent = Model.TotalSellerRatingCount == 0 ? 0 : item.RatingCount * 100 / Model.TotalSellerRatingCount;

                                    <div class="d-flex pt-1">
                                        <div class="pe-2"><i class="fa fa-star"></i> @item.Star </div>
                                        <div class="flex-fill py-1">
                                            <div class="progress" style="margin-bottom:-1px;height:.7rem;">
                                                <div class="progress-bar h-bg-green" style="width:@percent%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="25" role="progressbar"></div>
                                            </div>
                                        </div>
                                        <div class="fw-bold ps-3"><span>@percent<small>%</small></span></div>
                                    </div>
                                }
                            </div>
                        }
                        else
                        {
                            <div class="col-md-6 border-end ps-3 pe-4">
                                <div class="row pb-2">
                                    <div class="col-md-6">
                                        <h6>
                                            Seller ratings
                                        </h6>
                                    </div>
                                </div>
                                <div class="text-center p-4">
                                    <div class="p-3 fst-italic">No rating available</div>
                                </div>
                            </div>
                        }
                        @if (Model.TotalPickupBoyRatingCount != 0)
                        {
                            <div class="col-md-6 border-start pe-3 ps-4">
                                <div class="row pb-2">
                                    <div class="col-md-6">
                                        <h6>
                                            Pickup boy ratings
                                        </h6>
                                    </div>
                                    <div class="col-md-6 text-end">

                                        <span class="fw-bold h5">@Model.PickupBoyRatingStarAverage.ToString("#.#")</span>
                                        <span>
                                            @for (var i = 1; i <= Model.PickupBoyRatingStarAverage; i++)
                                            {
                                                <i class="fa fa-star text-warning"></i>
                                            }
                                            @if (Model.PickupBoyRatingStarAverage % 1 != 0)
                                            {
                                                <i class="fa fa-star-half-empty text-warning"></i>
                                            }
                                        </span>
                                        <br />
                                        <small>(Based on @Model.TotalPickupBoyRatingCount ratings)</small>
                                    </div>
                                </div>
                                @foreach (var item in Model.RatingSummary.PickupBoyCounts.OrderByDescending(m => m.Star))
                                {
                                    int percent = Model.TotalPickupBoyRatingCount == 0 ? 0 : item.RatingCount * 100 / Model.TotalPickupBoyRatingCount;

                                    <div class="d-flex pt-1">
                                        <div class="pe-2"><i class="fa fa-star"></i> @item.Star </div>
                                        <div class="flex-fill py-1">
                                            <div class="progress" style="margin-bottom:-1px;height:.7rem;">
                                                <div class="progress-bar h-bg-green" style="width:@percent%;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="25" role="progressbar"></div>
                                            </div>
                                        </div>
                                        <div class="fw-bold ps-3"><span>@percent<small>%</small></span></div>
                                    </div>
                                }
                            </div>
                        }
                        else
                        {
                            <div class="col-md-6 border-start ps-3 pe-4">
                                <div class="row pb-2">
                                    <div class="col-md-6">
                                        <h6>
                                            Pickup boy ratings
                                        </h6>
                                    </div>
                                </div>
                                <div class="text-center p-4">
                                    <div class="p-3 fst-italic">No rating available</div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
}

